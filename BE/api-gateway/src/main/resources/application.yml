server:
  port: 21500

spring:
  application:
    name: api-gateway
  main:
    allow-bean-definition-overriding: true
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: http://${KEYCLOAK_HOST:localhost}:${KEYCLOAK_PORT:8080}/realms/${KEYCLOAK_REALM:keycloak}
          jwk-set-uri: http://${KEYCLOAK_HOST:localhost}:${KEYCLOAK_PORT:8080}/realms/${KEYCLOAK_REALM:keycloak}/protocol/openid-connect/certs

# Keycloak Configuration (from env.local)
keycloak:
  auth-server-url: http://${KEYCLOAK_HOST:localhost}:${KEYCLOAK_PORT:8080}
  realm: ${KEYCLOAK_REALM:keycloak}
  resource: ${KEYCLOAK_RESOURCE:doantotnghiep}
  public-client: true
  principal-attribute: preferred_username

# Microservices Configuration
# Domain-based URLs for Docker support, can override via env
services:
  user:
    base-url: ${USER_SERVICE_URL:http://user-service:8080}
  settings:
    base-url: ${SETTINGS_SERVICE_URL:http://settings-service:8080}
  # Uncomment and add other services as needed
  # order:
  #   base-url: ${ORDER_SERVICE_URL:http://order-service:8080}
  # delivery:
  #   base-url: ${DELIVERY_SERVICE_URL:http://delivery-service:8080}

# Logging Configuration
logging:
  level:
    com.ds.gateway: INFO
    org.springframework.security: DEBUG
    org.springframework.web: INFO

      
      
